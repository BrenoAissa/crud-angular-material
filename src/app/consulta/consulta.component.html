<div fxLayout="row" fxLayoutAlign="center start">
    <div fxLayout="column" fxFlex="100%" fxFlex.gt-sm="90%" fxFlex.gt-md="800px">

        <form class="mt-60" #buscaFrm="ngForm" (ngSubmit)="buscar()">
            
            <mat-card>

                <mat-card-header>
                    <mat-card-title>Consulta</mat-card-title>
                </mat-card-header>

                <mat-card-content class="mt-20">

                    <div fxLayout="column" fxLayoutGap="16px">
                        <mat-form-field class="full-width">
                            <mat-label>Nome *</mat-label>
                            <input matInput 
                                   type="text" 
                                   name="nomeBusca"
                                   [(ngModel)]="nomeBusca"
                                   placeholder="Ex: Breno Augusto de Oliveira">
                        </mat-form-field>
                    </div>

                </mat-card-content>

                
                <mat-card-actions
                    fxLayout="column"
                    fxLayout.gt-sm="row"
                    fxLayoutAlign="end"
                    fxLayoutGap="5px">

                    <button mat-flat-button color="primary" type="submit">
                        Pesquisar
                    </button>

                </mat-card-actions>
            </mat-card>
        </form>
    </div>
</div>

<div fxLayout="row" fxLayoutAlign="center start" class="mt-20">
    <div fxLayout="column" fxFlex="100%" fxFlex.gt-sm="90%" fxFlex.gt-md="800px">

        <form class="mt-60">
            
            <mat-card appearance="outlined">

                <mat-card-header>
                    <mat-card-title>Resultado</mat-card-title>
                </mat-card-header>

                <mat-card-content>
                        <table mat-table [dataSource]="listarCliente">

                            <ng-container matColumnDef="nome">
                                <th mat-header-cell *matHeaderCellDef>Nome</th>
                                <td mat-cell
                                    *matCellDef="let cliente"
                                    matTooltip="ID: {{ cliente.id }}">
                                    {{ cliente.nome }}
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="cpf">
                                <th mat-header-cell *matHeaderCellDef>CPF</th>
                                <td mat-cell *matCellDef="let cliente">{{ cliente.cpf }}</td>
                            </ng-container>

                            <ng-container matColumnDef="dataNascimento">
                                <th mat-header-cell *matHeaderCellDef>Data de Nascimento</th>
                                <td mat-cell *matCellDef="let cliente">{{ cliente.dataNascimento }}</td>
                            </ng-container>

                            <ng-container matColumnDef="email">
                                <th mat-header-cell *matHeaderCellDef>Email</th>
                                <td mat-cell *matCellDef="let cliente">{{ cliente.email }}</td>
                            </ng-container>

                            <ng-container matColumnDef="uf">
                                <th mat-header-cell *matHeaderCellDef>UF</th>
                                <td mat-cell *matCellDef="let cliente">{{ cliente.uf }}</td>
                            </ng-container>

                            <ng-container matColumnDef="municipio">
                                <th mat-header-cell *matHeaderCellDef>Cidade</th>
                                <td mat-cell *matCellDef="let cliente">{{ cliente.municipio }}</td>
                            </ng-container>

                            <ng-container matColumnDef="acoes">
                                <th mat-header-cell *matHeaderCellDef>Ações</th>
                                <td mat-cell *matCellDef="let cliente">

                                    <button mat-icon-button color="primary"
                                            (click)="solicitaEditar(cliente.id)">
                                    <mat-icon>edit</mat-icon>
                                    </button>
                                    
                                    @if(!cliente.deletando){

                                        <button
                                            mat-icon-button
                                            color="warn"
                                            (click)="solicitaDeletar(cliente)">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                    }

                                    @else {
                                        <button
                                            mat-icon-button
                                            color="warn"
                                            (click)="deletar(cliente)">
                                            <mat-icon>check</mat-icon>
                                        </button>
                                    }
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="colunasTabela"></tr>
                            <tr mat-row *matRowDef="let cliente; columns: colunasTabela"></tr>

                        </table>
                </mat-card-content>
            </mat-card>
        </form>
    </div>
</div>